<div class="form-section">
  <div class="d-flex justify-content-between align-items-start flex-wrap gap-2 mb-3">
    <div>
      <h3 class="form-section-title d-flex align-items-center gap-2 mb-1">
        <!-- <i class="material-icons">tune</i> -->
        {{ 'customize.title' | translate }}
      </h3>
      <p class="text-muted mb-0">
        {{ 'customize.subtitle' | translate }}
      </p>
    </div>
  </div>

  <form [formGroup]="form">
    <div class="row g-3">
      <!-- Cards -->
      <div class="col-12 col-lg-6">
        <div class="customize-card">
          <div class="customize-card-header">
            <div class="d-flex align-items-center gap-2">
              <!-- <i class="material-icons">view_list</i> -->
              <h4 class="group-title mb-0">{{ 'customize.sectionTitles.title' | translate }}</h4>
            </div>
            <span class="badge text-bg-light">{{ 'customize.badges.mainColumn' | translate }}</span>
          </div>

          <div class="customize-card-body">
            <div class="mb-3">
              <label class="form-label">{{ 'customize.section.profile' | translate }}</label>
              <div class="input-group">
                <span class="input-group-text"><i class="material-icons">account_circle</i></span>
                <input class="form-control" type="text" formControlName="sectionProfile">
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">{{ 'customize.section.workExperienceProfessional' | translate }}</label>
              <div class="input-group">
                <span class="input-group-text"><i class="material-icons">work</i></span>
                <input class="form-control" type="text" formControlName="sectionWorkExperience">
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">{{ 'customize.section.education' | translate }}</label>
              <div class="input-group">
                <span class="input-group-text"><i class="material-icons">school</i></span>
                <input class="form-control" type="text" formControlName="sectionEducation">
              </div>
            </div>

            <div class="mb-0">
              <label class="form-label">{{ 'customize.section.references' | translate }}</label>
              <div class="input-group">
                <span class="input-group-text"><i class="material-icons">groups</i></span>
                <input class="form-control" type="text" formControlName="sectionReferences">
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-lg-6">
        <div class="customize-card">
          <div class="customize-card-header">
            <div class="d-flex align-items-center gap-2">
              <!-- <i class="material-icons">dashboard</i> -->
              <h4 class="group-title mb-0">{{ 'customize.sidebarTitles.title' | translate }}</h4>
            </div>
            <span class="badge text-bg-light">{{ 'customize.badges.sidebarColumn' | translate }}</span>
          </div>

          <div class="customize-card-body">
            <div class="mb-3">
              <label class="form-label">{{ 'customize.section.languages' | translate }}</label>
              <div class="input-group">
                <span class="input-group-text"><i class="material-icons">translate</i></span>
                <input class="form-control" type="text" formControlName="sectionLanguages">
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">{{ 'customize.section.skills' | translate }}</label>
              <div class="input-group">
                <span class="input-group-text"><i class="material-icons">psychology</i></span>
                <input class="form-control" type="text" formControlName="sectionSkills">
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">{{ 'customize.section.courses' | translate }}</label>
              <div class="input-group">
                <span class="input-group-text"><i class="material-icons">library_books</i></span>
                <input class="form-control" type="text" formControlName="sectionCourses">
              </div>
            </div>

            <div class="mb-0">
              <label class="form-label">{{ 'customize.section.projects' | translate }}</label>
              <div class="input-group">
                <span class="input-group-text"><i class="material-icons">folder</i></span>
                <input class="form-control" type="text" formControlName="sectionProjects">
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12">
        <div class="customize-card">
          <div class="customize-card-header">
            <div class="d-flex align-items-center gap-2">
              <!-- <i class="material-icons">contact_mail</i> -->
              <h4 class="group-title mb-0">{{ 'customize.contactLabels.title' | translate }}</h4>
            </div>
            <span class="badge text-bg-light">{{ 'customize.badges.header' | translate }}</span>
          </div>

          <div class="customize-card-body">
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">{{ 'customize.contactLabels.email' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="material-icons">mail</i></span>
                  <input class="form-control" type="text" formControlName="labelEmail">
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'customize.contactLabels.phone' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="material-icons">call</i></span>
                  <input class="form-control" type="text" formControlName="labelPhone">
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'customize.contactLabels.address' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="material-icons">home</i></span>
                  <input class="form-control" type="text" formControlName="labelAddress">
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'customize.contactLabels.nationality' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="material-icons">flag</i></span>
                  <input class="form-control" type="text" formControlName="labelNationality">
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'customize.contactLabels.birthDate' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="material-icons">calendar_today</i></span>
                  <input class="form-control" type="text" formControlName="labelBirthDate">
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'customize.contactLabels.age' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="material-icons">cake</i></span>
                  <input class="form-control" type="text" formControlName="labelAge">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12">
        <div class="customize-card">
          <div class="customize-card-header">
            <div class="d-flex align-items-center gap-2">
              <!-- <i class="material-icons">emoji_symbols</i> -->
              <h4 class="group-title mb-0">{{ 'customize.sectionIcons.title' | translate }}</h4>
            </div>
            <span class="badge text-bg-light">{{ 'customize.badges.titles' | translate }}</span>
          </div>

          <div class="customize-card-body">
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">{{ 'customize.section.profile' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><app-icon [name]="form.get('iconProfile')?.value" [size]="18"></app-icon></span>
                  <select class="form-select" formControlName="iconProfile">
                    <option *ngFor="let o of iconOptionsBySection.profile" [value]="o.value">{{ o.labelKey | translate }}</option>
                  </select>
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label">{{ 'customize.section.workExperience' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><app-icon [name]="form.get('iconWorkExperience')?.value" [size]="18"></app-icon></span>
                  <select class="form-select" formControlName="iconWorkExperience">
                    <option *ngFor="let o of iconOptionsBySection.workExperience" [value]="o.value">{{ o.labelKey | translate }}</option>
                  </select>
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label">{{ 'customize.section.education' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><app-icon [name]="form.get('iconEducation')?.value" [size]="18"></app-icon></span>
                  <select class="form-select" formControlName="iconEducation">
                    <option *ngFor="let o of iconOptionsBySection.education" [value]="o.value">{{ o.labelKey | translate }}</option>
                  </select>
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label">{{ 'customize.section.references' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><app-icon [name]="form.get('iconReferences')?.value" [size]="18"></app-icon></span>
                  <select class="form-select" formControlName="iconReferences">
                    <option *ngFor="let o of iconOptionsBySection.references" [value]="o.value">{{ o.labelKey | translate }}</option>
                  </select>
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label">{{ 'customize.section.languages' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><app-icon [name]="form.get('iconLanguages')?.value" [size]="18"></app-icon></span>
                  <select class="form-select" formControlName="iconLanguages">
                    <option *ngFor="let o of iconOptionsBySection.languages" [value]="o.value">{{ o.labelKey | translate }}</option>
                  </select>
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label">{{ 'customize.section.skills' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><app-icon [name]="form.get('iconSkills')?.value" [size]="18"></app-icon></span>
                  <select class="form-select" formControlName="iconSkills">
                    <option *ngFor="let o of iconOptionsBySection.skills" [value]="o.value">{{ o.labelKey | translate }}</option>
                  </select>
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label">{{ 'customize.section.courses' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><app-icon [name]="form.get('iconCourses')?.value" [size]="18"></app-icon></span>
                  <select class="form-select" formControlName="iconCourses">
                    <option *ngFor="let o of iconOptionsBySection.courses" [value]="o.value">{{ o.labelKey | translate }}</option>
                  </select>
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label">{{ 'customize.section.projects' | translate }}</label>
                <div class="input-group">
                  <span class="input-group-text"><app-icon [name]="form.get('iconProjects')?.value" [size]="18"></app-icon></span>
                  <select class="form-select" formControlName="iconProjects">
                    <option *ngFor="let o of iconOptionsBySection.projects" [value]="o.value">{{ o.labelKey | translate }}</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- <div class="text-muted small mt-3">
              Tip: estos son <strong>Material Icons</strong>. Puedes cambiar el icono cuando quieras y se aplicar√° al preview.
            </div> -->
          </div>
        </div>
      </div>

      <div class="col-12">
        <div class="customize-card">
          <div class="customize-card-header">
            <div class="d-flex align-items-center gap-2">
              <!-- <i class="material-icons">swap_vert</i> -->
              <h4 class="group-title mb-0">{{ 'customize.sectionOrder.title' | translate }}</h4>
            </div>
            <span class="badge text-bg-light">{{ 'customize.sectionOrder.badge' | translate }}</span>
          </div>

          <div class="customize-card-body">
            <div class="text-muted small mb-3">
              {{ 'customize.sectionOrder.description.beforeSave' | translate }}
              <strong>{{ 'customize.actions.save' | translate }}</strong>.
            </div>

            <div class="row g-3">
              <div class="col-12 col-lg-6">
                <div class="layout-col-title">{{ 'customize.badges.mainColumn' | translate }}</div>
                <div
                  class="section-dnd-list"
                  cdkDropList
                  [cdkDropListData]="mainSections"
                  [cdkDropListConnectedTo]="['sidebarSectionsList']"
                  id="mainSectionsList"
                  (cdkDropListDropped)="dropSection($event)">
                  <div class="section-dnd-item" *ngFor="let id of mainSections" cdkDrag>
                    <div class="d-flex align-items-center gap-2">
                      <span class="drag-handle" cdkDragHandle [attr.title]="'common.dragToReorder' | translate">
                        <i class="material-icons">drag_indicator</i>
                      </span>
                      <app-icon class="section-dnd-icon" [name]="getSectionIcon(id)" [size]="18"></app-icon>
                      <div class="section-dnd-label">{{ sectionMeta[id].labelKey | translate }}</div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-12 col-lg-6">
                <div class="layout-col-title">{{ 'customize.badges.sidebarShort' | translate }}</div>
                <div
                  class="section-dnd-list"
                  cdkDropList
                  [cdkDropListData]="sidebarSections"
                  [cdkDropListConnectedTo]="['mainSectionsList']"
                  id="sidebarSectionsList"
                  (cdkDropListDropped)="dropSection($event)">
                  <div class="section-dnd-item" *ngFor="let id of sidebarSections" cdkDrag>
                    <div class="d-flex align-items-center gap-2">
                      <span class="drag-handle" cdkDragHandle [attr.title]="'common.dragToReorder' | translate">
                        <i class="material-icons">drag_indicator</i>
                      </span>
                      <app-icon class="section-dnd-icon" [name]="getSectionIcon(id)" [size]="18"></app-icon>
                      <div class="section-dnd-label">{{ sectionMeta[id].labelKey | translate }}</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="text-muted small mt-3">
              {{ 'customize.sectionOrder.note' | translate }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-end gap-2 mt-4">
      <button type="button" class="btn btn-outline-secondary d-inline-flex align-items-center gap-2" (click)="resetToDefault()">
        <i class="material-icons">restart_alt</i>
        {{ 'customize.actions.resetDefault' | translate }}
      </button>
      <button type="button" class="btn btn-primary d-inline-flex align-items-center gap-2" [disabled]="form.invalid" (click)="save()">
        <i class="material-icons">save</i>
        {{ 'customize.actions.save' | translate }}
      </button>
    </div>
  </form>
</div>


