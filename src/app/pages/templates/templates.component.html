<div class="form-section">
  <div class="d-flex justify-content-between align-items-start flex-wrap gap-2 mb-3">
    <div>
      <h3 class="form-section-title d-flex align-items-center gap-2 mb-1">
        <i class="material-icons">palette</i>
        Plantillas
      </h3>
      <p class="text-muted mb-0">
        Elige el <strong>color principal</strong> del CV. Por defecto está el estilo actual.
      </p>
    </div>
  </div>

  <div class="template-card">
    <div class="template-card-header">
      <div class="d-flex align-items-center gap-2">
        <i class="material-icons">format_paint</i>
        <h4 class="group-title mb-0">Color principal</h4>
      </div>
      <span class="badge text-bg-light">Acento</span>
    </div>

    <div class="template-card-body">
      <div class="color-grid">
        <button
          type="button"
          class="color-option"
          *ngFor="let c of colors"
          (click)="selectColor(c.value)"
          [class.selected]="selectedColor === c.value"
          [attr.aria-pressed]="selectedColor === c.value">
          <span class="swatch" [style.background]="c.value"></span>
          <span class="meta">
            <span class="name">{{ c.name }}</span>
            <span class="hint text-muted">{{ c.hint }}</span>
          </span>
          <i class="material-icons check" *ngIf="selectedColor === c.value">check_circle</i>
        </button>
      </div>

      <div class="selected-row mt-3">
        <span class="text-muted">Seleccionado:</span>
        <span class="selected-chip">
          <span class="chip-swatch" [style.background]="selectedColor"></span>
          <span class="chip-text">{{ selectedColor }}</span>
        </span>
      </div>

      <div class="custom-color-row mt-3">
        <div class="text-muted mb-2">Personalizado</div>
        <div class="custom-color-controls">
          <input
            class="color-picker"
            type="color"
            [value]="selectedColor"
            (input)="selectColor($any($event.target).value)"
            aria-label="Selector de color">

          <input
            class="form-control hex-input"
            type="text"
            [value]="selectedColor"
            (change)="onHexChange($any($event.target).value)"
            placeholder="#RRGGBB"
            aria-label="Color en HEX">
        </div>
      </div>
    </div>
  </div>

  <div class="template-card mt-3">
    <div class="template-card-header">
      <div class="d-flex align-items-center gap-2">
        <i class="material-icons">view_quilt</i>
        <h4 class="group-title mb-0">Plantilla</h4>
      </div>
      <span class="badge text-bg-light">Por defecto</span>
    </div>

    <div class="template-card-body">
      <p class="text-muted mb-3">
        Esta es la plantilla base actual. Más plantillas vendrán después.
      </p>

      <div class="templates-strip" aria-label="Galería de plantillas">
        <button
          *ngFor="let t of templateGallery; trackBy: trackByTemplateId"
          type="button"
          class="template-mini"
          (click)="selectTemplate(t.id)"
          [class.selected]="selectedTemplateId === t.id">
          <div class="template-mini-preview" aria-hidden="true">
            <img
              class="preview-img preview-img-base"
              [src]="t.previewBase"
              alt=""
              loading="lazy">
            <img
              class="preview-img preview-img-hover"
              [src]="t.previewHover"
              alt=""
              loading="lazy">
          </div>

          <div class="template-mini-meta">
            <div class="template-mini-name-row">
              <div class="template-mini-name">{{ t.nombre }}</div>
              <span class="template-badge-selected" *ngIf="selectedTemplateId === t.id">
                <i class="material-icons">check_circle</i>
                Seleccionada
              </span>
            </div>
            <div class="template-mini-sub text-muted">
              <ng-container *ngFor="let tag of t.tags; let last = last">
                <span class="tag">{{ tag }}</span>
                <span class="dot" *ngIf="!last">·</span>
              </ng-container>
            </div>
          </div>
        </button>
      </div>
    </div>
  </div>
</div>


